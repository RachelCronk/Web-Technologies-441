<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Babylon.js Example</title>
  <script src="https://cdn.babylonjs.com/babylon.js"></script>
  <style>
    canvas {
      width: 100%;
      height: 100%;
      display: block;
    }
  </style>
</head>
<body>

    <a href="index2.html">To Page Two</a>
  <canvas id="renderCanvas"></canvas>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      var canvas = document.getElementById("renderCanvas");
      var engine = new BABYLON.Engine(canvas, true);

      function createScene() {
        var scene = new BABYLON.Scene(engine);
        var camera = new BABYLON.FreeCamera("camera", new BABYLON.Vector3(0, 5, -10), scene);
        camera.setTarget(BABYLON.Vector3.Zero());
        camera.attachControl(canvas, true);

        var light = new BABYLON.HemisphericLight("light", new BABYLON.Vector3(0, 1, 3), scene);
        light.intensity = 0.5;

        var ground = BABYLON.MeshBuilder.CreateGround("ground", { width: 20, height: 20 }, scene);
        ground.material = new BABYLON.StandardMaterial("groundMat", scene);
        ground.material.diffuseColor = new BABYLON.Color3(0, 1, 0);

        var sphere = BABYLON.MeshBuilder.CreateSphere("sphere", { diameter: 2 }, scene);
        sphere.position.y = 1;
        sphere.material = new BABYLON.StandardMaterial("sphereMat", scene);
        sphere.material.diffuseColor = new BABYLON.Color3(0, 0, 1);

        var radius = 2;
        var spheres = [];

        for (var i = 0; i < 2; i++) {
          radius /= 2;
          var smallerSphereLeft = BABYLON.MeshBuilder.CreateSphere("sphere" + (i + 2), { diameter: radius * 2 }, scene);
          smallerSphereLeft.position.y = 1;
          smallerSphereLeft.position.x = -(radius * 2 * (i + 2));
          smallerSphereLeft.material = new BABYLON.StandardMaterial("sphereMat", scene);
          smallerSphereLeft.material.diffuseColor = new BABYLON.Color3(0, 0, 1);
          spheres.push(smallerSphereLeft);

          var smallerSphereRight = BABYLON.MeshBuilder.CreateSphere("sphere" + (i + 4), { diameter: radius * 2 }, scene);
          smallerSphereRight.position.y = 1;
          smallerSphereRight.position.x = radius * 3 * (i + 2);
          smallerSphereRight.material = new BABYLON.StandardMaterial("sphereMat", scene);
          smallerSphereRight.material.diffuseColor = new BABYLON.Color3(0, 0, 1);
          spheres.push(smallerSphereRight);
        }

        // Animation for rotating the middle sphere
        var rotateAnimation = new BABYLON.Animation(
          "rotateAnimation",
          "rotation.y",
          30,
          BABYLON.Animation.ANIMATIONTYPE_FLOAT,
          BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE
        );

        // Define keyframes for the animation
        var keys = [];
        keys.push({
          frame: 0,
          value: 0
        });
        keys.push({
          frame: 100,
          value: Math.PI * 2
        });

        // Set animation keys
        rotateAnimation.setKeys(keys);

        // Apply animation to the middle sphere
        sphere.animations.push(rotateAnimation);
        scene.beginAnimation(sphere, 0, 100, true);

        return { scene, camera, spheres };
      }

      var { scene, camera, spheres } = createScene();

      // Function to move spheres randomly
      function moveSpheresRandomly() {
        spheres.forEach(function(sphere) {
          var randomX = Math.random() * 0.2 - 0.1; // Random movement in X direction
          var randomZ = Math.random() * 0.2 - 0.1; // Random movement in Z direction
          sphere.position.x += randomX;
          sphere.position.z += randomZ;
        });
      }

      engine.runRenderLoop(function () {
        scene.render();
      });

      window.addEventListener("resize", function () {
        engine.resize();
      });

      // Listen for camera movements
      canvas.addEventListener("mousemove", function () {
        moveSpheresRandomly();
      });
    });
  </script>
</body>
</html>
